post:
  summary: RTP Request
  tags:
    - Client Bank API Specs
  description: "<a id=\"rtpRequest\"></a>\nWe recommend to expose the APIs in such a manner that access to that API is available only through jwt authentication.\nIn order to do so, following are the two methods which bank’s channel has to expose:\n \n1.\tAuthentication (generate access token) – for authentication merchanism please follow \n2.\tRTP request\n \nTo send RTP request to channel backend. In response channel backend sent http://200 only.\n•\tOC will initiate rtpRequest to send parsed data from pain.013 to channel\n•\tOC will send access token in headers of this API. (Access token received in response of authentication)"
  operationId: rtpRequest
  parameters:
    - name: Content-Type
      in: header
      description: Content-Type of Request Body
      required: true
      schema:
        type: string
  x-codeSamples:
    - lang: CURL
      source:
        $ref: ../code_samples/CURL/bank_channel_rtpRequest/post.sh
  responses:
    '200':
      description: Success
      content:
        application/json:
          examples:
            '0':
              summary: Success Response Example
              value:
                response:
                  response_code: '0000'
                  response_desc: SUCCESS
                info:
                  stan: '010123'
                  rrn: '010123010123'
            '405':
              summary: failure Response Example
              value:
                response:
                  response_code: '0405'
                  response_desc: Beneficiary account is invalid
                info:
                  stan: '010123'
                  rrn: '010123010123'
          schema:
            type: object
            properties:
              response_code:
                $ref: ..\components\schemas\response_code.yaml
              response_desc:
                $ref: ..\components\schemas\response_desc.yaml
              rrn:
                $ref: ..\components\schemas\rsp_rrn.yaml
              stan:
                $ref: ..\components\schemas\rsp_stan.yaml
              correlationId:
                type: string
                minLength: 40
                maxLength: 40
                description: >-
                  Unique correlation id for the transaction generated by Open
                  Connect
              instrId:
                type: string
                minLength: 40
                maxLength: 40
                description: Instruction id sent to RAAST
              endToEndId:
                type: string
                minLength: 40
                maxLength: 40
                description: End to end id sent to RAAST
              txId:
                type: string
                minLength: 40
                maxLength: 40
                description: Transaction id sent to RAAST
              msgId:
                type: string
                minLength: 24
                maxLength: 24
                description: Echo back
            required:
              - response_code
              - response_desc
              - rrn
              - stan
    '401':
      description: Unauthorized
      content:
        application/json:
          example:
            error: unauthorized
            status: 401
  requestBody:
    required: true
    content:
      application/json:
        schema:
          type: object
          properties:
            info:
              type: object
              properties:
                rrn:
                  type: string
                  description: Retrieval reference number.
                  minLength: 12
                  maxLength: 12
                  example: '123456789012'
                stan:
                  type: string
                  description: System trace audit number.
                  minLength: 6
                  maxLength: 6
                  example: '654321'
                txndate:
                  type: string
                  description: |
                    Transaction date (Format: yyyymmdd).

                    OC will send the same value received by the scheme.
                  minLength: 8
                  maxLength: 8
                  example: '20240101'
                txntime:
                  type: string
                  description: |
                    Transaction time (Format: hhmmss).

                    OC will send the same value received by the scheme.
                  minLength: 6
                  maxLength: 6
                  example: '235959'
            senderInfo:
              type: object
              properties:
                memberId:
                  type: string
                  description: Member id or BIC code of customer’s bank.
                  minLength: 11
                  maxLength: 11
                  example: BIC12345678
                accountTitle:
                  type: string
                  description: Name or account title of customer.
                  minLength: 1
                  maxLength: 100
                  example: John Doe
                iban:
                  type: string
                  description: IBAN number of customer.
                  minLength: 24
                  maxLength: 24
                  example: GB82WEST12345698765432
                additionalRequiredDetails:
                  type: string
                  description: >
                    This param will be used if merchant requires any additional
                    info from customer i.e. his Mobile no (M), email address (E)
                    or address (A).


                    Merchant will send the parameter value as M, E, A or
                    combination of these i.e. AME.
                  minLength: 0
                  maxLength: 3
                  example: MEA
            identificationDetails:
              type: object
              properties:
                loyaltyNo:
                  type: string
                  description: Loyalty number of customer if any.
                  minLength: 0
                  maxLength: 35
                  example: L1234567890
                customerLabel:
                  type: string
                  description: Customer label if any.
                  minLength: 0
                  maxLength: 35
                  example: Preferred Customer
            paymentInfo:
              type: object
              properties:
                rtpExecutionDateTime:
                  type: string
                  description: RTP Execution date-time (Format yyyymmddhhmmss).
                  minLength: 14
                  maxLength: 14
                  example: '20240101120000'
                rtpExpiryDateTime:
                  type: string
                  description: >-
                    RTP Expiry date-time provided by merchant (Format
                    yyyymmddhhmmss).
                  minLength: 14
                  maxLength: 14
                  example: '20240101180000'
                rtpType:
                  type: string
                  description: |
                    NOW in case of RTP Now and LATER in case of RTP Later.
                  minLength: 3
                  maxLength: 5
                  example: NOW
            merchantInfo:
              type: object
              properties:
                memberId:
                  type: string
                  description: Member id or BIC code of sender bank/acquirer.
                  minLength: 11
                  maxLength: 11
                  example: BIC98765432
                dba:
                  type: string
                  description: Merchant “doing business as” name.
                  minLength: 1
                  maxLength: 140
                  example: Merchant DBA Name
                accountTitle:
                  type: string
                  description: Merchant name or account title.
                  minLength: 1
                  maxLength: 140
                  example: Merchant Account Title
                iban:
                  type: string
                  description: Merchant IBAN where he/she wants to receive payment.
                  minLength: 24
                  maxLength: 24
                  example: GB82WEST12345698765432
                country:
                  type: string
                  description: Merchant country code (e.g., PK).
                  minLength: 2
                  maxLength: 2
                  example: PK
                merchantCategoryCode:
                  type: string
                  description: Merchant category code (MCC).
                  minLength: 1
                  maxLength: 35
                  example: '1234'
                merchantIdAlias:
                  type: string
                  description: Merchant Alias ID.
                  minLength: 0
                  maxLength: 35
                  example: MerchantAlias123
            postalAddress:
              type: object
              properties:
                townName:
                  type: string
                  description: Town/City name of merchant.
                  minLength: 1
                  maxLength: 35
                  example: Townsville
                subDept:
                  type: string
                  description: Terminal label.
                  minLength: 1
                  maxLength: 70
                  example: Terminal 1
                addressLine:
                  type: string
                  description: Address of merchant shop.
                  minLength: 1
                  maxLength: 70
                  example: 123 Main Street
            contactDetails:
              type: object
              properties:
                phoneNo:
                  type: string
                  description: Phone number/landline of merchant.
                  minLength: 13
                  maxLength: 34
                  example: '+1234567890123'
                mobileNo:
                  type: string
                  description: Mobile number of merchants.
                  minLength: 13
                  maxLength: 34
                  example: '+1234567890123'
                email:
                  type: string
                  description: Email address of merchant.
                  minLength: 0
                  maxLength: 100
                  example: merchant@example.com
                dept:
                  type: string
                  description: Department details of merchant.
                  minLength: 0
                  maxLength: 70
                  example: Sales Department
                website:
                  type: string
                  description: Website of merchant.
                  minLength: 0
                  maxLength: 128
                  example: https://merchantwebsite.com
                merchantChannelId:
                  type: string
                  description: Channel ID of merchant.
                  minLength: 0
                  maxLength: 128
                  example: Channel123
            geoLocation:
              type: object
              properties:
                lat:
                  type: string
                  description: Latitude of merchant position.
                  minLength: 0
                  maxLength: 128
                  example: '24.8607'
                long:
                  type: string
                  description: Longitude of merchant position.
                  minLength: 0
                  maxLength: 128
                  example: '67.0011'
            amountInfo:
              type: object
              properties:
                instructedAmount:
                  type: number
                  description: Instructed amount of actual amount.
                  example: 100.5
                duePayableAmount:
                  type: number
                  description: Due payable amount.
                  example: 105.75
                adjustmentAmount:
                  type: number
                  description: Any adjustment amount if applicable.
                  example: -5.25
                cdtDbtIndicator:
                  type: string
                  description: >
                    CRDT for credit.


                    DBIT for debit.


                    This param will be mandatory if duePayableAmount and
                    adjustmentAmount are provided.
                  minLength: 0
                  maxLength: 4
                  example: CRDT
                adjustmentReason:
                  type: string
                  description: >
                    Reason of adjustment i.e., PNLT for penalty.


                    List of reasons can be provided by SBP.


                    This param will be mandatory if duePayableAmount and
                    adjustmentAmount are provided.
                  minLength: 0
                  maxLength: 4
                  example: PNLT
                immediatePaymentRebateAmount:
                  type: number
                  description: Payment Rebate Amount.
                  example: 2.5
                delayPenaltyAmount:
                  type: number
                  description: Delay Penalty Amount.
                  example: 1.75
                isAmountModificationAllowed:
                  type: boolean
                  description: True if amount modification is allowed.
                  example: true
                isEarlyPaymentAllowed:
                  type: boolean
                  description: True if early payment is allowed.
                  example: true
            additionalInfo:
              type: object
              properties:
                currency:
                  type: string
                  description: Currency code.
                  minLength: 0
                  maxLength: 3
                  example: USD
                billNumber:
                  type: string
                  description: Bill number.
                  minLength: 0
                  maxLength: 25
                  example: '123456789'
                billDueDate:
                  type: string
                  description: Bill due date (Format ddMMyyyy).
                  minLength: 0
                  maxLength: 8
                  example: '16012024'
                amountAfterDueDate:
                  type: number
                  description: Amount after due date.
                  example: 110
                terminalID:
                  type: string
                  description: Terminal ID.
                  minLength: 0
                  maxLength: 25
                  example: Terminal123
                paymentPurpose:
                  type: string
                  description: Payment purpose.
                  minLength: 0
                  maxLength: 25
                  example: Payment for services
                merchantTaxId:
                  type: string
                  description: Merchant Tax ID.
                  minLength: 0
                  maxLength: 25
                  example: TAX123456
                merchantChannel:
                  type: string
                  description: Merchant channel.
                  minLength: 0
                  maxLength: 3
                  example: WEB
                ttc:
                  type: string
                  description: TTC.
                  minLength: 0
                  maxLength: 3
                  example: TTC123
                rtpId:
                  type: string
                  description: RTP ID.
                  minLength: 0
                  maxLength: 100
                  example: RTP1234567890
            referredDocumentDetails:
              type: object
              properties:
                hasRelatedImage:
                  type: boolean
                  description: If any image is associated then true.
                  example: true
                imageAlternativeId:
                  type: string
                  description: ID of image.
                  minLength: 0
                  maxLength: 35
                  example: IMG1234567890
                relatedDate:
                  type: string
                  description: Related date (Format YYYY-MM-DD).
                  minLength: 0
                  maxLength: 10
                  example: '2024-01-16'
            invoiceDetails:
              type: object
              properties:
                enclosedFileCode:
                  type: string
                  description: File Type (e.g., MSIN, SPRR).
                  minLength: 0
                  maxLength: 4
                  example: MSIN
                id:
                  type: string
                  description: UUID.
                  minLength: 0
                  maxLength: 35
                  example: UUID1234567890
                issueDate:
                  type: string
                  description: Issue date of invoice (Format YYYY-MM-DD).
                  minLength: 0
                  maxLength: 10
                  example: '2024-01-16'
                enclosureInXMLFormat:
                  type: string
                  description: XML format of invoice is expected but in string format.
                  minLength: 0
                  maxLength: 10000
                  example: <invoice>...</invoice>
                referenceLabel:
                  type: string
                  description: Information passed by merchant.
                  minLength: 0
                  maxLength: 100
                  example: Reference Info
            reserveFields:
              type: object
              properties:
                r1:
                  type: string
                  description: Reserve field 1.
                  minLength: 0
                  maxLength: 100
                  example: Reserve1
                r2:
                  type: string
                  description: Reserve field 2.
                  minLength: 0
                  maxLength: 100
                  example: Reserve2
                r3:
                  type: string
                  description: Reserve field 3.
                  minLength: 0
                  maxLength: 100
                  example: Reserve3
                r4:
                  type: string
                  description: Reserve field 4.
                  minLength: 0
                  maxLength: 100
                  example: Reserve4
                r5:
                  type: string
                  description: Reserve field 5.
                  minLength: 0
                  maxLength: 100
                  example: Reserve5
