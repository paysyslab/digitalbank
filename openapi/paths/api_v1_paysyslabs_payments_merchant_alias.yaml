post:
  summary: Pay via Merchant RAAST ID
  tags:
    - Payment API Specs
  description: >-
    <a id="merchantPaymentRequest"></a>

    Customer will be able to make payment to merchants via ALIAS (Merchant RAAST
    ID).


    Channel will initiate OC
    [getMerchantaliasInfo](#tag/Non-Financial-API-Specs/operation/getMerchantaliasInfo)
    first to fetch merchant info
  operationId: merchantPaymentRequest
  parameters:
    - name: Content-Type
      in: header
      description: Content-Type of Request Body
      required: true
      schema:
        type: string
  x-codeSamples:
    - lang: CURL
      source:
        $ref: ../code_samples/CURL/api_v1_paysyslabs_payments_merchant_alias/post.sh
  responses:
    '200':
      description: Success
      content:
        application/json:
          examples:
            '0':
              summary: Success Response Example
              value:
                response:
                  response_code: '0000'
                  response_desc: SUCCESS
                info:
                  stan: '010123'
                  rrn: '010123010123'
                  correlationId: 7ad7fb9f-99dc-4c2c-ab88-abddb87789a0
                paymentInfo:
                  instrId: TMIC230511125023876423
                  endToEndId: 1fc66b584e77-46e6-9dcb-fb12c00e7742
                  txId: TMIC230511125023876423
                  msgId: TMICFBPK110523000111250233
            '405':
              summary: failure Response Example
              value:
                response:
                  response_code: '0405'
                  response_desc: Beneficiary account is invalid
                info:
                  stan: '010123'
                  rrn: '010123010123'
                  correlationId: 7ad7fb9f-99dc-4c2c-ab88-abddb87789a0
                paymentInfo:
                  msgId: TMICFBPK110523000111250233
          schema:
            type: object
            properties:
              response_code:
                $ref: ..\components\schemas\response_code.yaml
              response_desc:
                $ref: ..\components\schemas\response_desc.yaml
              rrn:
                $ref: ..\components\schemas\rsp_rrn.yaml
              stan:
                $ref: ..\components\schemas\rsp_stan.yaml
              correlationId:
                type: string
                minLength: 40
                maxLength: 40
                description: >-
                  Unique correlation id for the transaction generated by Open
                  Connect
              instrId:
                type: string
                minLength: 40
                maxLength: 40
                description: Instruction id sent to RAAST
              endToEndId:
                type: string
                minLength: 40
                maxLength: 40
                description: End to end id sent to RAAST
              txId:
                type: string
                minLength: 40
                maxLength: 40
                description: Transaction id sent to RAAST
              msgId:
                type: string
                minLength: 24
                maxLength: 24
                description: Echo back
            required:
              - response_code
              - response_desc
              - rrn
              - stan
              - correlationId
              - msgId
    '401':
      description: Unauthorized
      content:
        application/json:
          example:
            error: unauthorized
            status: 401
  requestBody:
    required: true
    content:
      application/json:
        schema:
          type: object
          properties:
            senderInfo:
              type: object
              properties:
                iban:
                  type: string
                  description: Payer (Customer) – IBAN
                  minLength: 24
                  maxLength: 24
                  example: DE89370400440532013000
                accountTitle:
                  type: string
                  description: Payer (Customer) – Account title
                  minLength: 1
                  maxLength: 40
                  example: John Doe
            senderIdentification:
              type: object
              properties:
                idType:
                  type: string
                  description: CNIC, NICOP, PASSPORT, NTN, REGNUM etc
                  minLength: 1
                  maxLength: 10
                  example: CNIC
                idValue:
                  type: string
                  description: Value of the selected idType
                  minLength: 1
                  maxLength: 30
                  example: '4220141111113'
            paymentInfo:
              type: object
              properties:
                dateTime:
                  type: string
                  description: Date/time stamp provided by Channel (Format yyyymmddhhmmss)
                  minLength: 14
                  maxLength: 14
                  example: '20221216153620'
                latitude:
                  type: string
                  description: Payer geo-location if captured by channel
                  minLength: 1
                  maxLength: 10
                  example: '25.276987'
                longitude:
                  type: string
                  description: Payer geo-location if captured by channel
                  minLength: 1
                  maxLength: 10
                  example: '55.296249'
                paymentPurpose:
                  type: string
                  description: >-
                    Purpose of payment will be sent here. Bank can decide
                    whether to take input from customer as a dropdown or send a
                    hardcoded value for merchant payment.
                  minLength: 1
                  maxLength: 25
                  example: Merchant Payment
                authId:
                  type: string
                  description: >-
                    Debit authorization unique reference number returned by core
                    banking in response to debit hold request
                  minLength: 1
                  maxLength: 40
                  example: AUTH1234567890
                msgId:
                  type: string
                  description: Unique reference number sent to RAAST for e2e reconciliation
                  minLength: 1
                  maxLength: 40
                  example: MSG1234567890
            amountInfo:
              type: object
              properties:
                fee:
                  type: number
                  description: >-
                    For future use only as currently, there is no fee
                    implemented on RAAST payment. Value of this param should be
                    0 currently.
                  example: 0
                amount:
                  type: number
                  description: Amount entered by user
                  example: 100.5
            info:
              type: object
              properties:
                stan:
                  type: string
                  description: Last 6 digits of RRN
                  minLength: 6
                  maxLength: 6
                  example: '654321'
                rrn:
                  type: string
                  description: Retrieval reference number
                  minLength: 12
                  maxLength: 12
                  example: '123456789012'
            merchantInfo:
              type: object
              properties:
                accountTitle:
                  type: string
                  description: Value resolved from getMerchantAliasInfo [5.1.3]
                  minLength: 1
                  maxLength: 40
                  example: Merchant Account
                dba:
                  type: string
                  description: Value resolved from getMerchantAliasInfo [5.1.3]
                  minLength: 1
                  maxLength: 40
                  example: Doing Business As
                categoryCode:
                  type: string
                  description: Value resolved from getMerchantAliasInfo [5.1.3]
                  minLength: 1
                  maxLength: 4
                  example: '1234'
                bic:
                  type: string
                  description: Value resolved from getMerchantAliasInfo [5.1.3]
                  minLength: 1
                  maxLength: 12
                  example: BANKDEFF
                iban:
                  type: string
                  description: Value resolved from getMerchantAliasInfo [5.1.3]
                  minLength: 24
                  maxLength: 24
                  example: DE89370400440532013000
                merchantIdAlias:
                  type: string
                  description: >-
                    Pass in case of Pay to alias to track alias in Payment
                    message
                  minLength: 1
                  maxLength: 100
                  example: MERCHANT123
            reserveFields:
              type: object
              properties:
                r1:
                  type: string
                  description: Reserved for future use
                  minLength: 1
                  maxLength: 100
                  example: Reserved1
                r2:
                  type: string
                  description: Reserved for future use
                  minLength: 1
                  maxLength: 100
                  example: Reserved2
                r3:
                  type: string
                  description: Reserved for future use
                  minLength: 1
                  maxLength: 100
                  example: Reserved3
                r4:
                  type: string
                  description: Reserved for future use
                  minLength: 1
                  maxLength: 100
                  example: Reserved4
                r5:
                  type: string
                  description: Reserved for future use
                  minLength: 1
                  maxLength: 100
                  example: Reserved5
