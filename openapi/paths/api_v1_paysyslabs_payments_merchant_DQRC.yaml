post:
  summary: Pay via Dynamic QRC
  tags:
    - Payment API Specs
  description: >-
    <a id="merchantPaymentRequestDQRC"></a>

    Customer will be able to make payment to merchants via dynamic QRC (online
    QRC) generated by merchant for payments. Customer will have active digital
    app to scan the merchant generated QRC payment.


    NOTE: To differentiate between static and dynamic QRC, rtpId (QR TAG: 84)
    would be mandatory in dynamic QRC whereas in static QRC, it is not required.
  operationId: merchantPaymentRequestDQRC
  parameters:
    - name: Content-Type
      in: header
      description: Content-Type of Request Body
      required: true
      schema:
        type: string
  x-codeSamples:
    - lang: CURL
      source:
        $ref: ../code_samples/CURL/api_v1_paysyslabs_payments_merchant_DQRC/post.sh
  responses:
    '200':
      description: Success
      content:
        application/json:
          examples:
            '0':
              summary: Success Response Example
              value:
                response:
                  response_code: '0000'
                  response_desc: SUCCESS
                info:
                  stan: '010123'
                  rrn: '010123010123'
                  correlationId: 7ad7fb9f-99dc-4c2c-ab88-abddb87789a0
                paymentInfo:
                  instrId: TMIC230511125023876423
                  endToEndId: 1fc66b584e77-46e6-9dcb-fb12c00e7742
                  txId: TMIC230511125023876423
                  msgId: TMICFBPK110523000111250233
            '405':
              summary: failure Response Example
              value:
                response:
                  response_code: '0405'
                  response_desc: Beneficiary account is invalid
                info:
                  stan: '010123'
                  rrn: '010123010123'
                  correlationId: 7ad7fb9f-99dc-4c2c-ab88-abddb87789a0
                paymentInfo:
                  msgId: TMICFBPK110523000111250233
          schema:
            type: object
            properties:
              response_code:
                $ref: ..\components\schemas\response_code.yaml
              response_desc:
                $ref: ..\components\schemas\response_desc.yaml
              rrn:
                $ref: ..\components\schemas\rsp_rrn.yaml
              stan:
                $ref: ..\components\schemas\rsp_stan.yaml
              correlationId:
                type: string
                minLength: 40
                maxLength: 40
                description: >-
                  Unique correlation id for the transaction generated by Open
                  Connect
              instrId:
                type: string
                minLength: 40
                maxLength: 40
                description: Instruction id sent to RAAST
              endToEndId:
                type: string
                minLength: 40
                maxLength: 40
                description: End to end id sent to RAAST
              txId:
                type: string
                minLength: 40
                maxLength: 40
                description: Transaction id sent to RAAST
              msgId:
                type: string
                minLength: 24
                maxLength: 24
                description: Echo back
            required:
              - response_code
              - response_desc
              - rrn
              - stan
              - correlationId
              - msgId
    '401':
      description: Unauthorized
      content:
        application/json:
          example:
            error: unauthorized
            status: 401
  requestBody:
    required: true
    content:
      application/json:
        schema:
          type: object
          properties:
            info:
              type: object
              properties:
                rrn:
                  type: string
                  description: Retrieval reference number
                  minLength: 12
                  maxLength: 12
                  example: '123456789012'
                stan:
                  type: string
                  description: System trace audit number
                  minLength: 6
                  maxLength: 6
                  example: '654321'
                txndate:
                  type: string
                  description: Transaction date (Format yyyymmdd)
                  minLength: 8
                  maxLength: 8
                  example: '20230101'
                txntime:
                  type: string
                  description: Transaction time (Format hhmmss)
                  minLength: 6
                  maxLength: 6
                  example: '123456'
            senderInfo:
              type: object
              properties:
                iban:
                  type: string
                  description: Payer (Customer) – IBAN
                  minLength: 24
                  maxLength: 24
                  example: DE89370400440532013000
                accountTitle:
                  type: string
                  description: Payer (Customer) – Account title
                  minLength: 1
                  maxLength: 40
                  example: John Doe
            senderIdentification:
              type: object
              properties:
                idType:
                  type: string
                  description: CNIC, NICOP, PASSPORT, NTN, REGNUM etc
                  minLength: 1
                  maxLength: 10
                  example: CNIC
                idValue:
                  type: string
                  description: Value of the selected idType
                  minLength: 1
                  maxLength: 30
                  example: '4220141111113'
            paymentInfo:
              type: object
              properties:
                dateTime:
                  type: string
                  description: Date/time stamp provided by Channel (Format yyyymmddhhmmss)
                  minLength: 14
                  maxLength: 14
                  example: '20221216153620'
                latitude:
                  type: string
                  description: Payer geo-location if captured by channel
                  minLength: 1
                  maxLength: 10
                  example: '25.276987'
                longitude:
                  type: string
                  description: Payer geo-location if captured by channel
                  minLength: 1
                  maxLength: 10
                  example: '55.296249'
                authId:
                  type: string
                  description: >-
                    Debit authorization unique reference number returned by core
                    banking in response to debit hold request
                  minLength: 1
                  maxLength: 40
                  example: AUTH1234567890
                msgId:
                  type: string
                  description: Unique reference number sent to RAAST for e2e reconciliation
                  minLength: 1
                  maxLength: 40
                  example: MSG1234567890
            amountInfo:
              type: object
              properties:
                amount:
                  type: number
                  description: Amount entered by user
                  example: 100.5
                tipAmount:
                  type: number
                  description: >-
                    TIP amount (In case if TIP is enabled in QRC otherwise it
                    will be zero)
                  example: 5
                txnAmount:
                  type: number
                  description: Sum of amount, tipAmount and fee
                  example: 105.5
            merchantInfo:
              type: object
              properties:
                accountTitle:
                  type: string
                  description: >-
                    In case of QR, put the information from QRC TAG 59. In case
                    of till-based payment put information returned from CAS API
                  minLength: 1
                  maxLength: 40
                  example: Merchant Account
                dba:
                  type: string
                  description: >-
                    In case of QR, put the information from QRC TAG 59. In case
                    of till-based payment put information returned from CAS API
                  minLength: 1
                  maxLength: 40
                  example: Doing Business As
                categoryCode:
                  type: string
                  description: Information from QRC TAG 52
                  minLength: 1
                  maxLength: 4
                  example: '1234'
                bic:
                  type: string
                  description: Information from [QRC TAG 28 / Field 1]
                  minLength: 1
                  maxLength: 12
                  example: BANKDEFF
                iban:
                  type: string
                  description: Merchant IBAN [QRC TAG 28 / Field 2]
                  minLength: 24
                  maxLength: 24
                  example: DE89370400440532013000
                merchantIdAlias:
                  type: string
                  description: Pass if information received in QR
                  minLength: 1
                  maxLength: 100
                  example: MERCHANT123
            additionalInfo:
              type: object
              properties:
                currency:
                  type: string
                  description: Information from QRC TAG 53
                  minLength: 1
                  maxLength: 3
                  example: USD
                country:
                  type: string
                  description: Information from QRC TAG 58
                  minLength: 1
                  maxLength: 2
                  example: US
                city:
                  type: string
                  description: Information from QRC TAG 60
                  minLength: 1
                  maxLength: 15
                  example: New York
                billNumber:
                  type: string
                  description: Information from [QRC TAG 62 / Field 01]
                  minLength: 1
                  maxLength: 25
                  example: BILL12345
                billDueDate:
                  type: string
                  description: Information from [QRC TAG 62 / Field 50]
                  minLength: 1
                  maxLength: 8
                  example: '20230101'
                amountAfterDueDate:
                  type: number
                  description: Information from [QRC TAG 62 / Field 51]
                  example: 110
                loyaltyNumber:
                  type: string
                  description: >-
                    The identifier assigned to a customer by a
                    merchant/brand/business for loyalty rewards
                  minLength: 1
                  maxLength: 25
                  example: LOYALTY12345
                mobileNumber:
                  type: string
                  description: Can be used for mobile topup
                  minLength: 1
                  maxLength: 15
                  example: '1234567890'
                storeLabel:
                  type: string
                  description: Information from [QRC TAG 62 / Field 03]
                  minLength: 1
                  maxLength: 25
                  example: Store Label
                customerLabel:
                  type: string
                  description: Information from [QRC TAG 62 / Field 06]
                  minLength: 1
                  maxLength: 25
                  example: Customer Label
                terminalID:
                  type: string
                  description: Information from [QRC TAG 62 / Field 07]
                  example: Terminal123
                paymentPurpose:
                  type: string
                  description: Information from [QRC TAG 62 / Field 08]
                  minLength: 1
                  maxLength: 25
                  example: Payment Purpose
                merchantTaxId:
                  type: string
                  description: Information from [QRC TAG 62 / Field 10]
                  minLength: 1
                  maxLength: 25
                  example: TAX12345
                merchantChannel:
                  type: string
                  description: Information from [QRC TAG 62 / Field 11]
                  minLength: 1
                  maxLength: 3
                  example: CHN
                rtpId:
                  type: string
                  description: Information from [QRC TAG 84], in case of dynamic QRC only.
                  minLength: 1
                  maxLength: 100
                  example: RTP12345
                ttc:
                  type: string
                  description: Information from [QRC TAG 85]
                  minLength: 1
                  maxLength: 3
                  example: TTC
                customerEmail:
                  type: string
                  description: Provided by user
                  minLength: 1
                  maxLength: 64
                  example: customer@example.com
                customerMobile:
                  type: string
                  description: Provided by user
                  minLength: 1
                  maxLength: 20
                  example: '1234567890'
                customerAddress:
                  type: string
                  description: Provided by user
                  minLength: 1
                  maxLength: 100
                  example: 123 Main Street, New York, NY
                referenceLabel:
                  type: string
                  description: Information from [QRC TAG 62 / Field 05]
                  minLength: 1
                  maxLength: 100
                  example: Reference Label
            reserveFields:
              type: object
              properties:
                r1:
                  type: string
                  description: Reserved for future use
                  minLength: 1
                  maxLength: 100
                  example: Reserved1
                r2:
                  type: string
                  description: Reserved for future use
                  minLength: 1
                  maxLength: 100
                  example: Reserved2
                r3:
                  type: string
                  description: Reserved for future use
                  minLength: 1
                  maxLength: 100
                  example: Reserved3
                r4:
                  type: string
                  description: Reserved for future use
                  minLength: 1
                  maxLength: 100
                  example: Reserved4
                r5:
                  type: string
                  description: Reserved for future use
                  minLength: 1
                  maxLength: 100
                  example: Reserved5
